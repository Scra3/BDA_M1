/*DELETE BD*/
/*
DROP TABLE Hotels;
DROP TABLE TypesCHambre;
DROP TABLE Chambre;
DROP TABLE Clients;
DROP TABLE Reservations;
DROP TABLE Occupations;
/*

/*CREATE TABLE HOTELS*/
CREATE TABLE HOTELS(
  NumHo NUMERIC(10) PRIMARY KEY,
  NomHo NUMERIC(10) NOT NULL,
  RueAdrHo VARCHAR(15) NOT NULL,
  VilleHo VARCHAR(10) NOT NULL,
  NbEtoilesHo NUMERIC(1) NOT NULL
);

INSERT INTO HOTELS (NumHo,NomHo,RueAdrHo,VilleHo,NbEtoilesHo) VALUES ('1','Le Palace','Rue theophile boudier','Mazargue','4');
INSERT INTO HOTELS (NumHo,NomHo,RueAdrHo,VilleHo,NbEtoilesHo) VALUES ('2','Le Sud','Rue boudeur','Mazargue','0');
INSERT INTO HOTELS (NumHo,NomHo,RueAdrHo,VilleHo,NbEtoilesHo) VALUES ('3','Le Marseillest','Rue st catherine','Mazargue','2');
INSERT INTO HOTELS (NumHo,NomHo,RueAdrHo,VilleHo,NbEtoilesHo) VALUES ('4','Le Paca','Rue Emile Zola','Marseille','1');
INSERT INTO HOTELS (NumHo,NomHo,RueAdrHo,VilleHo,NbEtoilesHo) VALUES ('5','Le Ricard','Rue Petin','Mazargue','3');


/*CREATE TABLE Types Chambre*/
CREATE TABLE TYPESCHAMBRE(
  Numty NUMERIC(10) PRIMARY KEY,
  NomTy VARCHAR(10) NOT NULL,
  PrixTy NUMERIC(100) NOT NULL
);

INSERT INTO TYPESCHAMBRES(Numty,NomTy,PrixTy) VALUES('1','Suite','1000');
INSERT INTO TYPESCHAMBRES(Numty,NomTy,PrixTy) VALUES('2','Simple','100');
INSERT INTO TYPESCHAMBRES(Numty,NomTy,PrixTy) VALUES('3','Simple plus','200');
INSERT INTO TYPESCHAMBRES(Numty,NomTy,PrixTy) VALUES('4','Luxe','500');
INSERT INTO TYPESCHAMBRES(Numty,NomTy,PrixTy) VALUES('5','Suite plus','10000');


/*CREATE TABLE Chambre*/
CREATE TABLE CHAMBRE(
  NumCh NUMERIC(10),
  NumHo NUMERIC(10) REFERENCES HOTELS,
  NumTy NUMERIC(10),
  PRIMARY KEY (NumCh,NumHo)
);

INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','1','1');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','1','2');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','1','3');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','1','4');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','1','5');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','1','6');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','1','7');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','1','9');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('4','1','10');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('5','1','11');

INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','2','1');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','2','2');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','2','3');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','2','4');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','2','5');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','2','6');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','2','7');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','2','8');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','2','9');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('4','2','10');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('5','2','11');

INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','3','1');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','3','2');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','3','3');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','3','4');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','3','5');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','3','6');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','3','7');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','3','8');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','3','9');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('4','3','10');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('5','3','11');

INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','4','1');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','4','2');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','4','3');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','4','4');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','4','5');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','4','6');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','4','7');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','4','8');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','4','9');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('4','4','10');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('5','4','11');

INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','5','1');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','5','2');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','5','3');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','5','4');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('1','5','5');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','5','6');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('2','5','7');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','5','8');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('3','5','9');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('4','5','10');
INSERT INTO CHAMBRES(Numty,NumHo,NumCh) VALUES('5','5','11');


/*CREATE TABLE Clients*/
CREATE TABLE CLIENTS(
  NumCl NUMERIC(10) PRIMARY KEY,
  NomCl VARCHAR(15),
  PrenomCl VARCHAR(15),
  RueAdrCL VARCHAR(15),
  VilleCL VARCHAR(15)
);

INSERT INTO CLIENTS(NumCl,NomCL,PrenomCl,RueAdrCl,VilleCl) VALUES('1','MAQUIN','Malorie','Rue pierre courtade','GRENOBLE');
INSERT INTO CLIENTS(NumCl,NomCL,PrenomCl,RueAdrCl,VilleCl) VALUES('2','BERTOLINI','Alban','Rue theophile boudier','');
INSERT INTO CLIENTS(NumCl,NomCL,PrenomCl,RueAdrCl,VilleCl) VALUES('3','RAFFE','Benedicte','Rue des acacias','CREON');
INSERT INTO CLIENTS(NumCl,NomCL,PrenomCl,RueAdrCl,VilleCl) VALUES('4','BLANCHETON','Fred','Rue cazaubaque','LIGNAN DE BORDEAUX');
INSERT INTO CLIENTS(NumCl,NomCL,PrenomCl,RueAdrCl,VilleCl) VALUES('5','ALAUX','Barbara','Rue des chartrons','BORDEAUX');


/*CREATE TABLE Reservations*/
CREATE TABLE RESERVATIONS(
  NumCl NUMERIC(10) REFERENCES CLIENTS,
  NumHo NUMERIC(10)REFERENCES HOTELS,
  Numty NUMERIC(10)REFERENCES TYPESCHAMBRE,
  DateA TimeStamps(0) NOT NULL,
  NbJours INTERVAL DAY TO SECOND(0) DEFAULT INTERVAL '1' DAY NOT NULL CHECK(NbJours >INTERVAL '0' DAY),
  NbChambres NUMERIC(2) NOT NULL DEFAULT '1',
  PRIMARY KEY(NomCl,NumHo,NumTy,DateA)
  );
  
  INSERT INTO RESERVATIONS(NumCL,NumHo,NumTy,DateA,NbJours,NbChambres) VALUES('1','1','4','2015-02-01 10:30:10','4','1');
  INSERT INTO RESERVATIONS(NumCL,NumHo,NumTy,DateA,NbJours,NbChambres) VALUES('2','1','1','2015-02-01 10:30:10','1','2');
  INSERT INTO RESERVATIONS(NumCL,NumHo,NumTy,DateA,NbJours,NbChambres) VALUES('3','2','1','2015-04-01 10:30:10','1','2');
  INSERT INTO RESERVATIONS(NumCL,NumHo,NumTy,DateA,NbJours,NbChambres) VALUES('4','4','1','2015-02-01 10:30:10','1','2');
  INSERT INTO RESERVATIONS(NumCL,NumHo,NumTy,DateA,NbJours,NbChambres) VALUES('5','3','3','2015-02-01 10:30:10','2','2');

/*CREATE TABLE Occupations*/
CREATE TABLE OCCUPATIONS(
  NumCl NUMERIC(10) NOT NULL,
  NumHo NUMERIC(10),
  NumCh NUMERIC(10),
  DateA TimeStamps(0) NOT NULL,
  DateD TimeStamps(0) CHECK (DateD> DateA), /*Peut être null => UPDATE lors du départ du client*/
  PRIMARY KEY(NumHo,NumCh,DateA)
);

  INSERT INTO TABLE OCCUPATIONS(NumCl,NumHo,NumCh,DateA)VALUES ('1','1','100','2015-02-01 10:30:10');  
  INSERT INTO TABLE OCCUPATIONS(NumCl,NumHo,NumCh,DateA)VALUES ('2','1','101','2015-02-01 10:30:10');
  INSERT INTO TABLE OCCUPATIONS(NumCl,NumHo,NumCh,DateA)VALUES ('3','2','90','2015-04-01 10:30:10');
  INSERT INTO TABLE OCCUPATIONS(NumCl,NumHo,NumCh,DateA)VALUES ('4','4','80','2015-02-01 10:30:10');
  INSERT INTO TABLE OCCUPATIONS(NumCl,NumHo,NumCh,DateA)VALUES ('5','3','30','2015-02-01 10:30:10');


